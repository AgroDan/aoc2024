# Day 22: Monkey Market

These petulant monkeys again!

I remember these monkeys being such a bane of my existance back in AOC 2022, but here they are again dealing with a banana market. In any case, this challenge was EXTREMELY easy compared to [Day 21](../day21/README.md). I'll admit, I was completely expecting that part two would involve reverse engineering the pseudorandom number generator for part one. I was WAY off. And thank god because I was about to re-read my old article I wrote about [Pseudo-random number generators](https://agrohacksstuff.io/posts/pseudo-random-number-generators-and-why-you-should-tread-lightly/), and even thinking about the idea of reverse engineering [MT19937](https://en.wikipedia.org/wiki/Mersenne_Twister) was enough to give me a headache.

Anyways, part one was pretty straight forward. Just input the functions needed to generate the pseudo-random numbers for each supplied monkey's "secret number" and get the sum of all of them. I was able to get that done before lunch, and that was the morning after a night where I went to bed close to 2 AM because a friend of mine and I spent several hours trying to beat a particularly hard boss in [Baldur's Gate 3](https://baldursgate3.game/). I won't mention the boss at the risk of spoilers.

Still, part one was a breeze. Just do what it says. No big deal.

Part two on the other hand was...hard to conceptualize at first. But after thinking about it for some time I understood the issue. I think my biggest problem here was truly grokking the challenge, because I had a sneaking suspicion that a vast majority of it had to do with optimizing the computation considering there was about `130,321` "sequences" to choose from, 4 potential numbers from `-9` to `9` multiplied 4 times, so if I were to check the `1665` numbers that each generated `2000` pseudo-random numbers for exactly those sequences, we're looking at `433,968,930,000` iterations to comb through. That seemed unreasonable so instead of the "throw everything at the wall" approach, I decided to pre-generate the pseudorandom numbers, obtain the ones digit for all of them and get the difference of each into a 2-dimensional array where the first column of each number was the pseudo-randomly generated number, the next column was the ones digit of that number, and the third column was the difference of col 2 and the previous row's col 2. Once I pre-generated those, I simply pulled every single _unique_ sequence of 4 numbers (from column 3) into a map object for _even more_ memoization. Once I had all of those, I simply combed through everything looking for exactly what the challenge asked me to look for: the most amount of bananas obtained from each specific sequence, then just finding the greatest number from that result set and entering that for part 2.

Part two took me the better part of the day to debug. Granted, today was the day after a moderate snow storm hit my area, so I had to shovel our pathway between bouts of trying to solve this challenge, then some food shopping, then dinner with my wife and family. I'd like to think I would have solved this earlier in the day, but I'm sure I would have gotten stuck on dumb things anyway and solved it around the same time.

In the end though, the biggest issue I had was...an off-by-one issue. I forgot to consider the very first number in each list of pseudo-random numbers as being a throw-away number, since there's no way to get a difference from it and any previous number (since there isn't a previous number). So once I started counting from 1 instead of 0, I managed to find the answer to part two. I think I can put this down as the worst issue to plague my capabilities in recent times. I really need to read things like 15 times before I start doing, because I would have saved myself so much time if I just...actually understood what I was reading. You live and learn I guess.

This challenge takes about 3 minutes and 12 seconds to complete on my home PC. Easily the longest solve out of everything so far, but ultimately not that bad. Coming down to the home stretch!